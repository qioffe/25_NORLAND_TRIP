<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Norland Trip Application Guide</title>
    <link rel="icon" type="image/x-icon" href="https://placehold.co/16x16/3B82F6/ffffff?text=N">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        :root {
            /* M3 Color Palette - Light Theme */
            --md-sys-color-primary: #3B82F6;
            --md-sys-color-on-primary: #FFFFFF;
            --md-sys-color-primary-container: #DCE1FF;
            --md-sys-color-on-primary-container: #001550;
            --md-sys-color-secondary: #595D72;
            --md-sys-color-on-secondary: #FFFFFF;
            --md-sys-color-secondary-container: #DEE1F9;
            --md-sys-color-on-secondary-container: #161B2C;
            --md-sys-color-surface: #F8FBFE;
            --md-sys-color-on-surface: #1B1B1F; /* Softer, off-black for body text */
            --md-sys-color-on-surface-variant: #45464F; /* Lighter gray for secondary text */
            --md-sys-color-surface-container-high: #E8E8F0;
            --md-sys-color-surface-container-highest: #E2E2E9;
            --md-sys-color-outline: #757780;
            --md-sys-color-outline-variant: #C5C6D0;
            --md-sys-color-pulse: rgba(59, 130, 246, 0.4);
            --main-container-bg: rgba(255, 255, 255, 0.55);
        }
        body { font-family: 'Poppins', sans-serif; color: var(--md-sys-color-on-surface); background: linear-gradient(-45deg, #a7b7ff, #eff6ff, #dbeafe, #c1d4ff); background-size: 400% 400%; animation: fluid-gradient 20s ease infinite; }
        @keyframes fluid-gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 0 0 transparent; } 70% { box-shadow: 0 0 0 10px var(--md-sys-color-pulse); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* M3 Typography & Base Styles */
        .main-container { border-radius: 24px; background-color: var(--main-container-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05); transition: opacity 0.5s ease-in-out; opacity: 0; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.5); }
        .main-container.is-visible { opacity: 1; }
        
        /* M3 Component: Card */
        .m3-card {
            border-radius: 16px;
            background-color: var(--md-sys-color-surface);
            box-shadow: 0 1px 2px 0 rgba(0,0,0,0.08);
            border: 1px solid var(--md-sys-color-outline-variant);
            transition: box-shadow 0.2s ease-in-out;
        }
        .m3-card:hover {
            box-shadow: 0 2px 8px 0 rgba(0,0,0,0.1);
        }

        /* M3 Component: Buttons */
        .m3-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.625rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }
        .m3-btn-filled {
            background-color: var(--md-sys-color-primary);
            color: var(--md-sys-color-on-primary);
        }
         .m3-btn-filled:hover { background-color: #2563EB; }
        .m3-btn-tonal {
            background-color: var(--md-sys-color-secondary-container);
            color: var(--md-sys-color-on-secondary-container);
        }
        .m3-btn-tonal:hover { background-color: #D4D8F3; }
        .m3-btn:disabled { background-color: var(--md-sys-color-surface-container-high); color: var(--md-sys-color-on-surface-variant); cursor: not-allowed; }

        /* Tabs */
        .tabs-container { border-bottom: 1px solid var(--md-sys-color-outline-variant); }
        .tab-btn { display: flex; align-items: center; justify-content: center; height: 48px; padding: 0 24px; font-size: 0.9rem; position: relative; flex-grow: 1; border: none; background-color: transparent; font-weight: 600; cursor: pointer; transition: background-color 0.2s; color: var(--md-sys-color-on-surface-variant); }
        .tab-btn::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 3px; background-color: var(--md-sys-color-primary); border-radius: 3px 3px 0 0; transform: scaleX(0); transition: transform 0.3s ease; }
        .tab-btn:hover { background-color: rgba(0,0,0,0.04); }
        .tab-btn.is-active { color: var(--md-sys-color-primary); }
        .tab-btn.is-active::after { transform: scaleX(1); }

        /* Stepper Redesign */
        .stepper { display: flex; flex-direction: column; }
        .stepper-item { display: flex; align-items: center; gap: 1rem; position: relative; cursor: pointer; padding: 1.25rem 0.5rem; border-radius: 12px; }
        .stepper-item:not(:last-child)::after { content: ''; position: absolute; left: 1.5rem; top: 3.25rem; transform: translateX(-50%); width: 1px; height: calc(100% - 1.75rem); background-color: var(--md-sys-color-outline-variant); z-index: -1; }
        .stepper-icon { width: 3rem; height: 3rem; border-radius: 9999px; display: flex; align-items: center; justify-content: center; font-weight: 500; z-index: 2; transition: all 0.3s; position: relative; flex-shrink: 0; background-color: var(--md-sys-color-surface-container-high); color: var(--md-sys-color-on-surface-variant); border: 1px solid var(--md-sys-color-outline-variant); }
        .stepper-icon .step-number, .stepper-icon .step-checkmark { transition: opacity 0.3s ease-in-out; position: absolute; }
        .stepper-icon .step-checkmark { opacity: 0; }
        .stepper-label-container { flex-grow: 1; }
        .stepper-label { font: 500 1.125rem/1.25rem 'Poppins', sans-serif; color: var(--md-sys-color-on-surface-variant); transition: color 0.3s; }
        .stepper-item.is-active { background-color: var(--md-sys-color-primary-container); }
        .stepper-item.is-active .stepper-label { color: var(--md-sys-color-on-primary-container); font-weight: 600; }
        .stepper-item.is-active .stepper-icon { background-color: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); border-color: var(--md-sys-color-primary); animation: pulse-glow 2s infinite; }
        .stepper-item.is-completed .stepper-icon { background-color: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); border-color: var(--md-sys-color-primary); }
        .stepper-item.is-completed .step-number { opacity: 0; }
        .stepper-item.is-completed .step-checkmark { opacity: 1; }
        .stepper-item.is-completed:not(:last-child)::after { background-color: var(--md-sys-color-primary); }
        
        /* Stepper Content & Header */
        #stepper-header { padding: 0 1rem 1.5rem 1rem; margin-bottom: 1rem; border-bottom: 1px solid var(--md-sys-color-outline-variant); }
        #stepper-header-title { font-size: 1.75rem; font-weight: 500; color: var(--md-sys-color-on-surface); line-height: 2.25rem; }
        #stepper-header-subtitle { font-size: 1rem; color: var(--md-sys-color-on-surface-variant); min-height: 2rem; }
        .step-content { animation: fadeIn 0.5s ease-in-out; }

        /* Instruction & Document List Items */
        .instruction-card, .instruction-link { display: flex; text-decoration: none; color: inherit; border-radius: 12px; transition: background-color 0.2s, transform 0.2s; align-items: center; gap: 0.75rem; padding: 0.75rem; background-color: var(--md-sys-color-surface-container-high); border: 1px solid var(--md-sys-color-outline-variant); }
        .instruction-card:hover, .instruction-link:hover { background-color: var(--md-sys-color-surface-container-highest); transform: none; }
        .instruction-icon-container { width: 3rem; height: 3rem; border-radius: 9999px; background-color: var(--md-sys-color-secondary-container); color: var(--md-sys-color-on-secondary-container); display: flex; align-items: center; justify-content: center; flex-shrink: 0;}
        .instruction-content { flex-grow: 1; }
        .document-list-item { display: flex; text-decoration: none; color: inherit; border-radius: 12px; transition: background-color 0.2s, transform 0.2s; align-items: center; padding: 1rem; }
        .document-list-item:hover { background-color: var(--md-sys-color-surface-container-high); }
        .document-list-icon { flex-shrink: 0; margin-right: 1rem; color: var(--md-sys-color-primary); }
        .document-list-text { flex-grow: 1; }
        .document-list-action { flex-shrink: 0; margin-left: 1rem; color: var(--md-sys-color-primary); font-weight: 600; display: inline-flex; align-items: center; gap: 0.25rem; }
        .document-list-item:not(:last-child) { border-bottom: 1px solid var(--md-sys-color-outline-variant); }

        /* Flight Ticket (no changes) */
        .flight-ticket-card { font-family: 'Source Code Pro', monospace; display: flex; overflow: visible; background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(239, 246, 255, 0.7)); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.4); border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); position: relative; transform-style: preserve-3d; transition: transform 0.4s ease, box-shadow 0.4s ease; cursor: pointer; }
        .flight-ticket-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border-radius: 20px; box-shadow: 0 0 0px rgba(59, 130, 246, 0.5); opacity: 0; transition: all 0.4s ease; z-index: -1; }
        .flight-ticket-card:hover::before { box-shadow: 0 0 40px rgba(59, 130, 246, 0.5); opacity: 1; }
        .flight-ticket-card:active { transform: scale(0.98) !important; transition-duration: 0.1s; }
        .ticket-main { padding: 1.5rem; flex-grow: 1; }
        .ticket-stub { flex-basis: 90px; flex-shrink: 0; background-color: rgba(239, 246, 255, 0.8); border-left: 2px dashed rgba(221, 232, 244, 0.7); display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 1.25rem 0.5rem; position: relative; border-radius: 0 20px 20px 0; }
        .ticket-stub::before, .ticket-stub::after { content: ''; position: absolute; left: -12px; width: 24px; height: 24px; background-color: rgba(248, 251, 254, 0.55); border-radius: 50%; z-index: 10; }
        .ticket-stub::before { top: -12px; }
        .ticket-stub::after { bottom: -12px; }
        .ticket-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--md-sys-color-outline-variant); padding-bottom: 0.75rem; margin-bottom: 1.5rem; }
        .ticket-airline { font-weight: 700; color: var(--md-sys-color-primary); display: flex; align-items: center; gap: 0.5rem; }
        .ticket-class { background-color: var(--md-sys-color-secondary-container); color: var(--md-sys-color-on-secondary-container); padding: 0.125rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .ticket-route { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .ticket-location { text-align: center; }
        .ticket-location .label { font-size: 0.75rem; color: #64748b; letter-spacing: 1px; }
        .ticket-location .code { font-size: 2.5rem; font-weight: 700; color: #1e293b; line-height: 1; }
        .ticket-flight-path { flex-grow: 1; height: 24px; position: relative; margin: 0 0.5rem; display: flex; align-items: center; justify-content: center; }
        .ticket-flight-path::after { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 2px; background-image: linear-gradient(to right, #9ca3af 50%, transparent 50%); background-size: 8px 2px; background-repeat: repeat-x; }
        .ticket-flight-icon-animated { position: absolute; top: 50%; color: var(--md-sys-color-primary); z-index: 2; }
        .flight-stops-info { position: relative; z-index: 1; background-color: rgba(255,255,255,0.7); padding: 0 0.5rem; }
        .stops-text { font-family: 'Poppins', sans-serif; font-size: 0.7rem; font-weight: 600; color: #64748b; letter-spacing: 0.5px; }
        @keyframes flight-loop-return { 0% { left: 0; transform: translateY(-50%) rotate(90deg); } 45% { left: calc(100% - 24px); transform: translateY(-50%) rotate(90deg); } 50% { left: calc(100% - 24px); transform: translateY(-50%) rotate(-90deg); } 95% { left: 0; transform: translateY(-50%) rotate(-90deg); } 100% { left: 0; transform: translateY(-50%) rotate(90deg); } }
        .ticket-flight-icon-animated-1 { animation: flight-loop-return 6s linear infinite; }
        .ticket-flight-icon-animated-2 { animation: flight-loop-return 8s linear infinite; }
        .ticket-footer { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 1.5rem; border-top: 1px solid var(--md-sys-color-outline-variant); padding-top: 1rem; }
        .ticket-details { font-size: 0.75rem; color: #64748b; font-family: 'Poppins', sans-serif; }
        .ticket-date-group { display: flex; gap: 1rem; font-family: 'Poppins', sans-serif; text-align: center; }
        .ticket-date-info .label { font-size: 0.75rem; color: #64748b; }
        .ticket-date-info .date-value { font-weight: 600; color: #1e293b; }
        .ticket-price { font-size: 1.75rem; font-weight: 700; color: var(--md-sys-color-primary); line-height: 1; }
        .ticket-price .currency { font-size: 1rem; vertical-align: baseline; }
        .ticket-stub .code { writing-mode: vertical-rl; text-orientation: mixed; font-weight: 700; font-size: 1.25rem; letter-spacing: 2px; color: var(--md-sys-color-primary); }
        .flight-ticket-card.placeholder { filter: blur(4px); opacity: 0.6; }
        .ticket-barcode { width: 100%; height: 60px; background-image: linear-gradient(to right, #1e293b 1px, transparent 1px, transparent 3px, #1e293b 3px, #1e293b 4px, transparent 4px, transparent 6px, #1e293b 6px, #1e293b 8px, transparent 8px, transparent 9px); background-size: 12px 100%; }
        
        /* Itinerary Section */
        #itinerary-stepper .stepper-item { align-items: flex-start; }
        #itinerary-stepper .stepper-label { font: 500 1.125rem/1.25rem 'Poppins', sans-serif; color: var(--md-sys-color-on-surface-variant); transition: color 0.3s; }
        #itinerary-stepper .instruction-card { margin-top: 0 !important; background-color: var(--md-sys-color-surface); }
        #itinerary-stepper .stepper-item.is-active .instruction-card { border-color: var(--md-sys-color-primary); box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
        #itinerary-stepper { transition: max-height 0.6s ease-in-out; overflow: hidden; position: relative; }
        #itinerary-stepper.is-collapsed { max-height: 18rem; }
        #itinerary-stepper.is-collapsed::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 8rem; background: linear-gradient(to top, rgba(248, 251, 254, 1), rgba(248, 251, 254, 0)); pointer-events: none; border-radius: 0 0 16px 16px; }

        /* Responsive Design */
        @media (max-width: 1023px) {
            .visa-process-grid { display: block; }
        }

        @media (max-width: 768px) {
            body { padding: 0; }
            .main-container { padding: 1rem 0; margin: 0; border-radius: 0; box-shadow: none; border: none; background-color: transparent; backdrop-filter: none; -webkit-backdrop-filter: none; }
            .section-card { border-radius: 16px; margin-left: 1rem; margin-right: 1rem; }
            #itinerary-stepper .stepper-label-container { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
            #itinerary-stepper .instruction-card { width: 100%; }
            #itinerary-stepper.is-collapsed { max-height: 28rem; }
            #stepper-header-title { font-size: 1.5rem; }
        }
    </style>
</head>
<body class="flex flex-col items-center py-8 px-4">
    <div class="main-container w-full max-w-7xl mx-auto p-4 sm:p-8">
        <!-- Itinerary Section -->
        <div class="text-center px-4">
            <p class="text-sm font-medium text-blue-600 uppercase tracking-widest">SHANGHAI | SUZHOU | NANJING</p>
            <h1 class="text-3xl sm:text-4xl font-medium mt-2 tracking-tight" style="color: var(--md-sys-color-on-surface);">Tour Itinerary</h1>
        </div>
        <section class="m3-card p-4 sm:p-6 mt-6">
            <div id="itinerary-stepper" class="stepper px-2 sm:px-4">
                <!-- Itinerary stepper items will be generated by JS -->
            </div>
            <div class="pt-4 mt-2 text-center">
                 <button id="toggle-itinerary-btn" class="m3-btn m3-btn-tonal">See More</button>
            </div>
            <p class="text-xs italic text-center mt-4" style="color: var(--md-sys-color-on-surface-variant);">Please note: This is a provisional itinerary. A final schedule will be confirmed before departure.</p>
        </section>

        <!-- Flight Information Section -->
        <section class="mt-12 sm:mt-16">
            <div class="text-center px-4">
                <p class="text-sm font-medium text-blue-600 uppercase tracking-widest">Flight Information</p>
                <h1 class="text-3xl sm:text-4xl font-medium mt-2 tracking-tight" style="color: var(--md-sys-color-on-surface);">Your Flight Details</h1>
            </div>
            <div class="mt-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 px-4 sm:px-0">
                    <div class="flight-ticket-wrapper">
                        <div id="flight-card-fll" class="flight-ticket-card placeholder">
                            <div class="ticket-main">
                                <div class="ticket-header">
                                    <div class="ticket-airline">
                                        <span class="material-symbols-outlined">flight_takeoff</span>
                                        <span class="airline-name">NORLAND AIR</span>
                                    </div>
                                    <div class="ticket-class">ECONOMY</div>
                                </div>
                                <div class="ticket-route">
                                    <div class="ticket-location">
                                        <p class="label">FROM</p>
                                        <p class="code departure-code">FLL</p>
                                    </div>
                                    <div class="ticket-flight-path">
                                        <div class="flight-stops-info">
                                            <p class="stops-text"></p>
                                        </div>
                                        <span class="material-symbols-outlined ticket-flight-icon-animated ticket-flight-icon-animated-1">flight</span>
                                    </div>
                                    <div class="ticket-location">
                                        <p class="label">TO</p>
                                        <p class="code arrival-code">PVG</p>
                                    </div>
                                </div>
                                <div class="ticket-footer">
                                    <div class="ticket-details">
                                        <p class="flight-connections">Fetching route...</p>
                                        <p class="flight-last-updated">Updating...</p>
                                    </div>
                                    <div class="ticket-date-group">
                                        <div class="ticket-date-info">
                                            <p class="label">DEPART</p>
                                            <p class="date-value departure-date">-- ---</p>
                                        </div>
                                        <div class="ticket-date-info">
                                            <p class="label">RETURN</p>
                                            <p class="date-value return-date">-- ---</p>
                                        </div>
                                    </div>
                                    <div class="ticket-price">
                                        <span class="currency">$</span>----
                                    </div>
                                </div>
                            </div>
                            <div class="ticket-stub">
                                <p class="code route-stub-code">FLL-PVG</p>
                                <div class="ticket-barcode"></div>
                            </div>
                        </div>
                    </div>
                    <div class="flight-ticket-wrapper">
                         <div id="flight-card-mia" class="flight-ticket-card placeholder">
                            <div class="ticket-main">
                                <div class="ticket-header">
                                    <div class="ticket-airline">
                                        <span class="material-symbols-outlined">flight_takeoff</span>
                                        <span class="airline-name">NORLAND AIR</span>
                                    </div>
                                    <div class="ticket-class">ECONOMY</div>
                                </div>
                                <div class="ticket-route">
                                    <div class="ticket-location">
                                        <p class="label">FROM</p>
                                        <p class="code departure-code">MIA</p>
                                    </div>
                                    <div class="ticket-flight-path">
                                         <div class="flight-stops-info">
                                            <p class="stops-text"></p>
                                        </div>
                                        <span class="material-symbols-outlined ticket-flight-icon-animated ticket-flight-icon-animated-2">flight</span>
                                    </div>
                                    <div class="ticket-location">
                                        <p class="label">TO</p>
                                        <p class="code arrival-code">PVG</p>
                                    </div>
                                </div>
                                <div class="ticket-footer">
                                    <div class="ticket-details">
                                        <p class="flight-connections">Fetching route...</p>
                                        <p class="flight-last-updated">Updating...</p>
                                    </div>
                                     <div class="ticket-date-group">
                                        <div class="ticket-date-info">
                                            <p class="label">DEPART</p>
                                            <p class="date-value departure-date">-- ---</p>
                                        </div>
                                        <div class="ticket-date-info">
                                            <p class="label">RETURN</p>
                                            <p class="date-value return-date">-- ---</p>
                                        </div>
                                    </div>
                                    <div class="ticket-price">
                                        <span class="currency">$</span>----
                                    </div>
                                </div>
                            </div>
                            <div class="ticket-stub">
                                <p class="code route-stub-code">MIA-PVG</p>
                                <div class="ticket-barcode"></div>
                            </div>
                        </div>
                    </div>
                </div>
                 <p class="text-xs italic text-center mt-6" style="color: var(--md-sys-color-on-surface-variant);">Please note: Prices shown are for reference, and group rates may vary slightly.</p>
            </div>
        </section>
        
        <!-- Visa Application Section -->
        <div class="text-center mt-12 sm:mt-16 px-4">
            <p class="text-sm font-medium text-blue-600 uppercase tracking-widest">Preparation Guide</p>
            <h1 class="text-3xl sm:text-4xl font-medium mt-2 tracking-tight" style="color: var(--md-sys-color-on-surface);">Visa Application</h1>
        </div>

        <div class="m3-card mt-6">
            <nav class="tabs-container px-4 sm:px-6">
                <div class="tab-list" role="tablist">
                    <button class="tab-btn is-active" data-tab="process-tab" role="tab" aria-selected="true" tabindex="0">Application Process</button>
                    <button class="tab-btn" data-tab="documents-tab" role="tab" aria-selected="false" tabindex="0">Downloadable Forms</button>
                </div>
            </nav>
            
            <div class="p-4 sm:p-6">
                <div id="process-tab" class="tab-content" style="display:block;">
                    <div class="visa-process-grid grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 lg:border-r lg:pr-8 border-gray-200">
                            <div id="stepper-ui-container" class="stepper stepper-container">
                                <!-- Stepper items will be injected by JS -->
                            </div>
                        </div>
                        <div class="lg:col-span-2">
                             <div id="stepper-header">
                                <h3 id="stepper-header-title" class="stepper-header-title" style="color: var(--md-sys-color-on-surface);"></h3>
                                <p id="stepper-header-subtitle" class="stepper-header-subtitle" style="color: var(--md-sys-color-on-surface-variant);"></p>
                            </div>
                            <div class="step-content-container">
                                <!-- Step Content will be dynamically shown here -->
                            </div>
                            <div class="stepper-nav mt-8 pt-6 border-t border-gray-200 flex justify-between items-center">
                                <button id="prev-step-btn" class="m3-btn m3-btn-tonal">Previous</button>
                                <button id="next-step-btn" class="m3-btn m3-btn-filled">Next Step</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="documents-tab" class="tab-content" style="display:none;">
                    <div class="space-y-2">
                        <a href="https://qioffe.github.io/25_NORLAND_TRIP/Consent_Letter.pdf?v=random" target="_blank" rel="noopener noreferrer" class="document-list-item"><div class="document-list-icon"><span class="material-symbols-outlined text-4xl" style="color: var(--md-sys-color-primary);">description</span></div><div class="document-list-text"><h3 class="font-medium" style="color: var(--md-sys-color-on-surface);">Consent Letter</h3><p class="text-sm" style="color: var(--md-sys-color-on-surface-variant);">A notarized form for minors.</p></div><div class="document-list-action" style="color: var(--md-sys-color-primary);"><span class="material-symbols-outlined">download</span></div></a>
                        <a href="https://qioffe.github.io/25_NORLAND_TRIP/JESIE_application.pdf?v=random" target="_blank" rel="noopener noreferrer" class="document-list-item"><div class="document-list-icon"><span class="material-symbols-outlined text-4xl" style="color: var(--md-sys-color-primary);">description</span></div><div class="document-list-text"><h3 class="font-medium" style="color: var(--md-sys-color-on-surface);">JESIE Application</h3><p class="text-sm" style="color: var(--md-sys-color-on-surface-variant);">The main program application form.</p></div><div class="document-list-action" style="color: var(--md-sys-color-primary);"><span class="material-symbols-outlined">download</span></div></a>
                        <a href="https://qioffe.github.io/25_NORLAND_TRIP/cova_2013.pdf?v=random" target="_blank" rel="noopener noreferrer" class="document-list-item"><div class="document-list-icon"><span class="material-symbols-outlined text-4xl" style="color: var(--md-sys-color-primary);">description</span></div><div class="document-list-text"><h3 class="font-medium" style="color: var(--md-sys-color-on-surface);">Visa Application Templates (COVA)</h3><p class="text-sm" style="color: var(--md-sys-color-on-surface-variant);">A guide for the official COVA form.</p></div><div class="document-list-action" style="color: var(--md-sys-color-primary);"><span class="material-symbols-outlined">download</span></div></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainContainer = document.querySelector('.main-container');
            mainContainer.classList.add('is-visible');
            const randomVersion = Math.random().toString(36).substring(2, 8);
            
            const applicationStepContents = {
                 1: `<div>
                        <ul class="space-y-4">
                            <li class="instruction-link">
                                <div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">description</span></div>
                                <div class="instruction-content flex-grow">
                                    <h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Fill & E-sign the JESIE Form</h4>
                                    <p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">This is the main program application. Complete all fields and sign it digitally.</p>
                                </div>
                                <a href="https://qioffe.github.io/25_NORLAND_TRIP/JESIE_application.pdf?v=${randomVersion}" target="_blank" class="material-symbols-outlined text-base" style="color: var(--md-sys-color-on-surface-variant);">open_in_new</a>
                            </li>
                            <li class="instruction-card">
                                <div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">file_copy</span></div>
                                <div class="instruction-content">
                                    <h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Submit Passport Bio-Data Page</h4>
                                    <p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">Upload a clear photocopy of the minor's main passport page.</p>
                                </div>
                            </li>
                        </ul>
                    </div>`,
                2: `<div>
                        <p class="text-sm mb-6" style="color: var(--md-sys-color-on-surface-variant);">Gather these physical documents. You will need both the <strong>originals</strong> and <strong>photocopies</strong> where specified.</p>
                        <ul class="space-y-4">
                             <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">contact_page</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Original Passport</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">Must have 6+ months of validity and 2 blank pages.</p></div></li>
                             <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">badge</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Photocopy of Passport Page</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">A clear printout of the bio-data page.</p></div></li>
                             <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">account_box</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Guardian's ID & Address Proof</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">Photocopies of a valid ID and a recent utility bill or bank statement.</p></div></li>
                             <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">family_restroom</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Original Proof of Relationship</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">Original birth certificate (for parents) or court order (for guardians).</p></div></li>
                             <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">mail</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Official Invitation Letter</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">The letter you received after completing Step 1.</p></div></li>
                        </ul>
                    </div>`,
                3: `<div>
                        <p class="text-sm mb-6" style="color: var(--md-sys-color-on-surface-variant);">Use our templates to help you fill out the official government form online. <strong>A guardian must complete this step.</strong></p>
                        <ul class="space-y-4">
                            <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">photo_camera</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Prepare a Visa Photo</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">Have a recent, compliant digital photo ready to upload.</p></div></li>
                            <li class="instruction-link"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">language</span></div><div class="instruction-content flex-grow"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Go to the Official Visa Website</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">Select: North America -> Washington, D.C.</p></div><a href="https://cova.mfa.gov.cn/qzCoCommonController.do?show&pageId=index&locale=en_US" target="_blank" class="material-symbols-outlined text-base" style="color: var(--md-sys-color-on-surface-variant);">open_in_new</a></li>
                            <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">print</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Print & Sign the Final Forms</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">After completing, print all pages. A guardian must sign the confirmation page and Section 9.1.</p></div></li>
                        </ul>
                    </div>`,
                4: `<div>
                        <p class="text-sm mb-6" style="color: var(--md-sys-color-on-surface-variant);">Place all physical documents from Step 2 and the printed/signed forms from Step 3 into a single folder to submit.</p>
                        <ul class="space-y-4">
                            <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">checklist</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Final Document Check</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">We will perform a final review of your folder to ensure everything is correct.</p></div></li>
                            <li class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">send</span></div><div class="instruction-content"><h4 class="font-medium text-sm" style="color: var(--md-sys-color-on-surface);">Coordinator Submission</h4><p class="text-xs mt-1" style="color: var(--md-sys-color-on-surface-variant);">We will submit the complete application packet for you.</p></div></li>
                        </ul>
                    </div>`,
                5: `<div>
                       <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                           <div class="summary-card p-4"><div class="instruction-icon-container mb-2"><span class="material-symbols-outlined">mail</span></div><h3 class="font-medium text-lg" style="color: var(--md-sys-color-on-surface);">1. Invitation</h3><p class="text-sm mt-1" style="color: var(--md-sys-color-on-surface-variant);">Complete JESIS form and upload passport photocopy.</p></div>
                           <div class="summary-card p-4"><div class="instruction-icon-container mb-2"><span class="material-symbols-outlined">folder_open</span></div><h3 class="font-medium text-lg" style="color: var(--md-sys-color-on-surface);">2. Documents</h3><p class="text-sm mt-1" style="color: var(--md-sys-color-on-surface-variant);">Gather all required physical documents into a folder.</p></div>
                           <div class="summary-card p-4"><div class="instruction-icon-container mb-2"><span class="material-symbols-outlined">web</span></div><h3 class="font-medium text-lg" style="color: var(--md-sys-color-on-surface);">3. Online Application</h3><p class="text-sm mt-1" style="color: var(--md-sys-color-on-surface-variant);">Fill out, save, and print the official online visa form.</p></div>
                           <div class="summary-card p-4"><div class="instruction-icon-container mb-2"><span class="material-symbols-outlined">send</span></div><h3 class="font-medium text-lg" style="color: var(--md-sys-color-on-surface);">4. Final Submission</h3><p class="text-sm mt-1" style="color: var(--md-sys-color-on-surface-variant);">Submit your document folder to your coordinator.</p></div>
                       </div>
                    </div>`
            };

            const stepperContainer = document.getElementById('stepper-ui-container');
            const stepperItems = [
                { step: 1, label: "Invitation" },
                { step: 2, label: "Documents" },
                { step: 3, label: "Application" },
                { step: 4, label: "Submission" },
                { step: 5, label: "Summary" }
            ];

            stepperItems.forEach(item => {
                const stepEl = document.createElement('div');
                stepEl.className = 'stepper-item';
                stepEl.dataset.step = item.step;
                stepEl.tabIndex = 0;
                stepEl.innerHTML = `
                    <div class="stepper-icon"><span class="step-number">${item.step}</span><span class="material-symbols-outlined step-checkmark">check</span></div>
                    <div class="stepper-label-container"><div class="stepper-label">${item.label}</div></div>
                `;
                stepperContainer.appendChild(stepEl);
            });
            stepperContainer.querySelector('.stepper-item').classList.add('is-active');

            loadFlightData(randomVersion);
            setupTabs();
            setupStepper(applicationStepContents, true);
            setupItinerary();
            setupInteractiveCards();
            setupTicketScaling();
        });

        async function loadFlightData(randomVersion) {
            try {
                const response = await fetch(`https://qioffe.github.io/25_NORLAND_TRIP/flights_data.json?v=${randomVersion}`);
                if (!response.ok) throw new Error(`HTTP Error: ${response.status}`);
                const data = await response.json();
                updateFlightCard('flight-card-fll', data['FLL-PVG']);
                updateFlightCard('flight-card-mia', data['MIA-PVG']);
            } catch (error) {
                console.error("Failed to load flight data:", error);
                ['flight-card-fll', 'flight-card-mia'].forEach(id => updateFlightCard(id, { status: 'data_load_failed' }));
            }
        }

        function updateFlightCard(cardId, data) {
            const card = document.getElementById(cardId);
            if (!card) return;
            const el = (selector) => card.querySelector(selector);
            const isSuccess = data?.status === 'ok' && data.price;
            card.classList.toggle('placeholder', !isSuccess);
            const airlineEl = el('.airline-name');
            if (airlineEl) {
                airlineEl.textContent = isSuccess && data.airline ? data.airline.toUpperCase() : 'NORLAND AIR';
            }
            const stopsTextEl = el('.stops-text');
            const connectionsEl = el('.flight-connections');
            if (isSuccess && data.route_info) {
                const airports = data.route_info.split('â†’');
                const numStops = airports.length - 2;
                if (stopsTextEl) {
                    if (numStops > 0) {
                        stopsTextEl.textContent = `${numStops} STOP${numStops > 1 ? 'S' : ''}`;
                    } else {
                        stopsTextEl.textContent = 'NON-STOP';
                    }
                }
                if (connectionsEl) {
                    if (numStops > 0) {
                        const connections = airports.slice(1, -1).join(', ');
                        connectionsEl.textContent = `via ${connections}`;
                    } else {
                        connectionsEl.textContent = 'Direct Flight';
                    }
                }
            } else {
                if(stopsTextEl) stopsTextEl.textContent = '';
                if(connectionsEl) connectionsEl.textContent = (data?.status || 'error').replace(/_/g, ' ');
            }
            const lastUpdatedEl = el('.flight-last-updated');
            if (lastUpdatedEl) {
                lastUpdatedEl.textContent = isSuccess && data.last_updated ? `Updated: ${new Date(data.last_updated).toLocaleDateString('en-US', { day: 'numeric', month: 'short' })}` : '';
            }
            const departureCode = cardId.includes('fll') ? 'FLL' : 'MIA';
            const arrivalCode = 'PVG';
            const depCodeEl = el('.departure-code');
            if (depCodeEl) depCodeEl.textContent = departureCode;
            const arrCodeEl = el('.arrival-code');
            if (arrCodeEl) arrCodeEl.textContent = arrivalCode;
            const stubCodeEl = el('.route-stub-code');
            if (stubCodeEl) stubCodeEl.textContent = `${departureCode}-${arrivalCode}`;
            const departureDateEl = el('.departure-date');
            if (departureDateEl) {
                if (isSuccess && data.outbound_date) {
                    const tripDate = new Date(data.outbound_date + 'T00:00:00');
                    const formattedDate = tripDate.toLocaleDateString('en-US', { day: '2-digit', month: 'short' }).toUpperCase();
                    departureDateEl.textContent = formattedDate;
                } else {
                    departureDateEl.textContent = '-- ---';
                }
            }
            const returnDateEl = el('.return-date');
            if (returnDateEl) {
                if (isSuccess && data.return_date) {
                    const returnDate = new Date(data.return_date + 'T00:00:00');
                    const formattedReturnDate = returnDate.toLocaleDateString('en-US', { day: '2-digit', month: 'short' }).toUpperCase();
                    returnDateEl.textContent = formattedReturnDate;
                } else {
                    returnDateEl.textContent = '-- ---';
                }
            }
            const priceEl = el('.ticket-price');
            if (priceEl) {
                if (isSuccess && data.price) {
                    priceEl.innerHTML = `<span class="currency">$</span>${data.price}`;
                } else {
                    priceEl.innerHTML = `<span class="currency">$</span>----`;
                }
            }
        }

        function setupTabs() {
            document.querySelector('.tabs-container')?.addEventListener('click', e => {
                const button = e.target.closest('.tab-btn[data-tab]');
                if (!button) return;
                document.querySelectorAll('.tabs-container .tab-btn').forEach(btn => {
                    btn.classList.remove('is-active');
                    btn.setAttribute('aria-selected', 'false');
                });
                document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
                button.classList.add('is-active');
                button.setAttribute('aria-selected', 'true');
                document.getElementById(button.dataset.tab).style.display = 'block';
            });
        }

        function setupStepper(contents, hasNavButtons) {
            const container = document.querySelector('.visa-process-grid');
            if (!container) return;
            const root = container.querySelector('.stepper-container');
            const items = root.querySelectorAll('.stepper-item');
            const contentContainer = container.querySelector('.step-content-container');
            const nextBtn = container.querySelector('#next-step-btn');
            const prevBtn = container.querySelector('#prev-step-btn');
            const headerTitle = document.getElementById('stepper-header-title');
            const headerSubtitle = document.getElementById('stepper-header-subtitle');
            
            const stepHeaders = {
                1: { title: "Get Your Invitation", subtitle: "First, you'll need an official invitation letter from the program." },
                2: { title: "Gather Your Documents", subtitle: "Next, collect all the required original documents and photocopies." },
                3: { title: "Complete Online Forms", subtitle: "Use our templates to fill out the official online visa application." },
                4: { title: "Submit Your Folder", subtitle: "Finally, hand in your completed document folder to your coordinator." },
                5: { title: "Application Summary", subtitle: "Here's a quick overview of the visa application process you've completed." }
            };

            let step = 1;

            const update = () => {
                items.forEach((item, i) => {
                    const stepNumber = i + 1;
                    item.classList.toggle('is-completed', stepNumber < step);
                    item.classList.toggle('is-active', stepNumber === step);
                });
                if (contentContainer) {
                    contentContainer.innerHTML = `<div class="step-content">${contents[step]}</div>`;
                }
                if (headerTitle && headerSubtitle && stepHeaders[step]) {
                    headerTitle.textContent = stepHeaders[step].title;
                    headerSubtitle.textContent = stepHeaders[step].subtitle;
                }
                if (hasNavButtons) {
                    prevBtn.disabled = step === 1;
                    nextBtn.style.display = step === items.length ? 'none' : 'inline-flex';
                    nextBtn.textContent = step === items.length - 1 ? 'View Summary' : 'Next Step';
                }
            };
            
            const nav = (newStep) => { 
                step = Math.max(1, Math.min(newStep, items.length)); 
                update(); 
            };

            if (hasNavButtons) {
                nextBtn.addEventListener('click', () => nav(step + 1));
                prevBtn.addEventListener('click', () => nav(step - 1));
            }

            root.addEventListener('click', e => {
                const item = e.target.closest('.stepper-item[data-step]');
                if (item) nav(parseInt(item.dataset.step));
            });
            
            update();
        }

        function setupItinerary() {
            const stepperContainer = document.getElementById('itinerary-stepper');
            if(!stepperContainer) return;
            const itineraryContents = {
                1: { title: "Shanghai Arrival & Welcome", morning: { icon: "flight_land", text: "Arrive at PVG, Shanghai" }, afternoon: { icon: "directions_bus", text: "Transfer to Suzhou" } },
                2: { title: "Cultural Connect", morning: { icon: "school", text: "Visit Suzhou North American High School" }, afternoon: { icon: "science", text: "Explore the DNA Learning Center" } },
                3: { title: "Suzhou Sights & Sounds", morning: { icon: "park", text: "Tour the Humble Administratorâ€™s Garden" }, afternoon: { icon: "theater_comedy", text: "Visit the Kunshan Opera Museum" } },
                4: { title: "Creative Exchange", morning: { icon: "palette", text: "Engage in activities at Suzhou Tourism Institute" }, afternoon: { icon: "music_note", text: "Experience Kunqu opera at Suzhou Art Institute" } },
                5: { title: "Next Stop: Nanjing", morning: { icon: "train", text: "Travel to Nanjing" }, afternoon: { icon: "stadium", text: "Welcome ceremony at Nanjing Sport Institute" } },
                6: { title: "Cultural Performance Exchange", morning: { icon: "sports_tennis", text: "Interact with champions at the Sport Institute" }, afternoon: { icon: "group_work", text: "Share your talents at the exchange" } },
                7: { title: "The Grand Finale", morning: { icon: "museum", text: "Visit Nanjing University of the Arts Museum" }, afternoon: { icon: "campaign", text: "Represent at the Performance Gala" } },
                8: { title: "Nanjing's Legacy", morning: { icon: "landscape", text: "Dr. Sun Yat-senâ€™s Mausoleum Scenic Area" }, afternoon: { icon: "sailing", text: "Explore Xuanwu Lake & Confucius Temple" } },
                9: { title: "Pandas & Heritage", morning: { icon: "pets", text: "See pandas at Nanjing Hongshan Zoo" }, afternoon: { icon: "account_balance", text: "Explore the Nanjing Museum" } },
                10: { title: "Homeward Bound", morning: { icon: "flight_takeoff", text: "Depart from PVG, Shanghai" }, afternoon: { icon: "airplanemode_active", text: "Have a safe flight home!" } },
            };
            let stepperHTML = '';
            for (let i = 1; i <= 10; i++) {
                const day = itineraryContents[i];
                stepperHTML += ` <div class="stepper-item" data-step="${i}" tabindex="0"> <div class="stepper-icon"><span class="step-number">${i}</span><span class="material-symbols-outlined step-checkmark">check</span></div> <div class="stepper-label-container"> <div class="stepper-label font-medium">Day ${i}: ${day.title}</div> <div class="instruction-card interactive-card"> <div class="instruction-content w-full"> <div class="flex items-center gap-3 text-sm"> <span class="material-symbols-outlined text-lg" style="color: var(--md-sys-color-primary);">${day.morning.icon}</span> <p style="color: var(--md-sys-color-on-surface-variant);">${day.morning.text}</p> </div> <hr class="my-2 border-gray-200"> <div class="flex items-center gap-3 text-sm"> <span class="material-symbols-outlined text-lg" style="color: var(--md-sys-color-primary);">${day.afternoon.icon}</span> <p style="color: var(--md-sys-color-on-surface-variant);">${day.afternoon.text}</p> </div> </div> </div> </div> </div>`;
            }
            stepperContainer.innerHTML = stepperHTML;
            stepperContainer.classList.add('is-collapsed');
            stepperContainer.addEventListener('click', e => {
                const item = e.target.closest('.stepper-item[data-step]');
                if (item) {
                    const currentlyActive = stepperContainer.querySelector('.stepper-item.is-active');
                    if (currentlyActive) {
                        currentlyActive.classList.remove('is-active');
                    }
                    item.classList.add('is-active');
                }
            });
            const firstStep = stepperContainer.querySelector('.stepper-item[data-step="1"]');
            if (firstStep) {
                firstStep.classList.add('is-active');
            }
            const toggleBtn = document.getElementById('toggle-itinerary-btn');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    const isCollapsed = stepperContainer.classList.contains('is-collapsed');
                    if (isCollapsed) {
                        stepperContainer.classList.remove('is-collapsed');
                        stepperContainer.style.maxHeight = stepperContainer.scrollHeight + 'px';
                        toggleBtn.textContent = 'See Less';
                    } else {
                        stepperContainer.style.maxHeight = null;
                        stepperContainer.classList.add('is-collapsed');
                        toggleBtn.textContent = 'See More';
                    }
                });
                new ResizeObserver(() => {
                    if (!stepperContainer.classList.contains('is-collapsed')) {
                        stepperContainer.style.maxHeight = stepperContainer.scrollHeight + 'px';
                    }
                }).observe(stepperContainer);
            }
        }

        function setupInteractiveCards() {
            const cards = document.querySelectorAll('.flight-ticket-card');
            const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
            if (isTouchDevice && window.DeviceOrientationEvent) {
                window.addEventListener('deviceorientation', (event) => {
                    const beta = Math.min(Math.max(event.beta, -30), 30);
                    const gamma = Math.min(Math.max(event.gamma, -30), 30);
                    const rotateX = beta / 3;
                    const rotateY = gamma / 3;
                    cards.forEach(card => {
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                    });
                });
            } else {
                cards.forEach(card => {
                    card.addEventListener('mousemove', (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = e.clientX - rect.left - rect.width / 2;
                        const y = e.clientY - rect.top - rect.height / 2;
                        const rotateX = -y / 20;
                        const rotateY = x / 20;
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                    });
                    card.addEventListener('mouseleave', () => {
                        card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
                    });
                });
            }
        }
        
        function setupTicketScaling() {
            const ticketWrappers = document.querySelectorAll('.flight-ticket-wrapper');
            if (!ticketWrappers.length) return;
            const DESKTOP_TICKET_WIDTH = 580;
            const MOBILE_BREAKPOINT = 768;
            
            const applyScaling = () => {
                const screenWidth = window.innerWidth;
                ticketWrappers.forEach(wrapper => {
                    const ticket = wrapper.querySelector('.flight-ticket-card');
                    if (!ticket) return;
                    if (screenWidth < MOBILE_BREAKPOINT) {
                        const containerPadding = 32;
                        const availableWidth = screenWidth - containerPadding;
                        const scale = availableWidth / DESKTOP_TICKET_WIDTH;
                        wrapper.style.transform = `scale(${scale})`;
                        wrapper.style.transformOrigin = 'top left';
                        const ticketHeight = ticket.offsetHeight;
                        wrapper.style.height = `${ticketHeight * scale}px`;
                    } else {
                        wrapper.style.transform = '';
                        wrapper.style.transformOrigin = '';
                        wrapper.style.height = '';
                    }
                });
            };
            applyScaling();
            window.addEventListener('resize', applyScaling);
        }
    </script>
</body>
</html>
