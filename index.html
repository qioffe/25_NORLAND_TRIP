<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Norland Trip Application Guide</title>
    <link rel="icon" type="image/x-icon" href="https://placehold.co/16x16/3B82F6/ffffff?text=N">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        :root {
            --md-sys-color-primary: #3B82F6;
            --md-sys-color-primary-light: #60A5FA;
            --md-sys-color-primary-container: #EFF6FF;
            --md-sys-color-on-primary: #FFFFFF;
            --md-sys-color-secondary-container: #E0E7FF;
            --md-sys-color-on-secondary-container: #3730A3;
            --md-sys-color-surface: #F8FBFE;
            --md-sys-color-outline: #DDE8F4;
            --md-sys-color-pulse: rgba(59, 130, 246, 0.4);
            --main-container-bg: rgba(255, 255, 255, 0.55);
        }
        body { font-family: 'Poppins', sans-serif; color: #1e293b; background: linear-gradient(-45deg, #a7b7ff, #eff6ff, #dbeafe, #c1d4ff); background-size: 400% 400%; animation: fluid-gradient 20s ease infinite; }
        @keyframes fluid-gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 0 0 transparent; } 70% { box-shadow: 0 0 0 10px var(--md-sys-color-pulse); } }
        @keyframes gradient-shift { 50% { background-position: 100% 50%; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .main-container { border-radius: 24px; background-color: var(--main-container-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); box-shadow: 0 10px 30px -5px rgba(0,0,0,0.07), 0 4px 15px -6px rgba(0,0,0,0.05); transition: opacity 0.5s ease-in-out; opacity: 0; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.5); }
        .main-container.is-visible { opacity: 1; }
        .m3-elevated-card { border-radius: 16px; background-color: rgba(248, 251, 254, 0.65); backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 1px solid var(--md-sys-color-outline); }
        .interactive-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .interactive-card:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); }
        .interactive-card:active { transform: scale(0.98); }
        .tabs-container { border-bottom: 1px solid var(--md-sys-color-outline); }
        .tab-list { display: flex; justify-content: center; }
        .tab-btn { display: flex; align-items: center; justify-content: center; height: 48px; padding: 0 24px; font-size: 0.9rem; color: #475569; position: relative; flex-grow: 1; border: none; background-color: transparent; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
        .tab-btn::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 3px; background-color: var(--md-sys-color-primary); border-radius: 3px 3px 0 0; transform: scaleX(0); transition: transform 0.3s ease; }
        .tab-btn:hover { background-color: rgba(0,0,0,0.04); }
        .tab-btn.is-active { color: var(--md-sys-color-primary); }
        .tab-btn.is-active::after { transform: scaleX(1); }
        .document-list-item, .instruction-card, .instruction-link { display: flex; text-decoration: none; color: inherit; border-radius: 12px; transition: background-color 0.2s, transform 0.2s; }
        .document-list-item { align-items: center; padding: 1rem; }
        .document-list-item:not(:last-child) { border-bottom: 1px solid var(--md-sys-color-outline); }
        .instruction-card, .instruction-link { align-items: flex-start; gap: 0.75rem; padding: 0.75rem; border: 1px solid var(--md-sys-color-outline); background-color: rgba(247, 250, 252, 0.7); }
        .instruction-card:hover, .instruction-link:hover { background-color: var(--md-sys-color-primary-container); transform: scale(1.02); }
        .instruction-card:active, .instruction-link:active { transform: scale(0.99); transition-duration: 0.1s; }
        .document-list-item:hover { background-color: var(--md-sys-color-primary-container); }
        .document-list-icon, .instruction-icon-container { flex-shrink: 0; }
        .document-list-icon { margin-right: 1rem; color: var(--md-sys-color-primary); }
        .instruction-icon-container { width: 3rem; height: 3rem; border-radius: 9999px; background-color: var(--md-sys-color-primary-container); color: var(--md-sys-color-primary); display: flex; align-items: center; justify-content: center; }
        .document-list-text, .instruction-content { flex-grow: 1; }
        .document-list-action { flex-shrink: 0; margin-left: 1rem; color: var(--md-sys-color-primary); font-weight: 600; display: inline-flex; align-items: center; gap: 0.25rem; }
        
        /* Vertical Stepper Styles */
        .stepper { display: flex; flex-direction: column; }
        .stepper-item { display: flex; align-items: flex-start; gap: 1rem; position: relative; cursor: pointer; padding: 1.5rem 0; }
        .stepper-item:not(:last-child)::after { content: ''; position: absolute; left: 1.5rem; top: 4.5rem; transform: translateX(-50%); width: 2px; height: calc(100% - 3rem); background-color: var(--md-sys-color-outline); z-index: 1; transition: background-color 0.3s; }
        .stepper-icon { width: 3rem; height: 3rem; border-radius: 9999px; display: flex; align-items: center; justify-content: center; background-color: #DDE8F4; color: #4B5563; font-weight: 600; z-index: 2; transition: all 0.3s; border: 4px solid var(--md-sys-color-surface); position: relative; flex-shrink: 0; }
        .stepper-icon .step-number, .stepper-icon .step-checkmark { transition: opacity 0.3s ease-in-out; position: absolute; }
        .stepper-icon .step-checkmark { opacity: 0; }
        .stepper-label-container { flex-grow: 1; padding-top: 0.5rem; }
        .stepper-label { font: 600 1.125rem/1.25rem 'Poppins', sans-serif; color: #475569; transition: color 0.3s; }
        .stepper-item.is-active .stepper-icon { background-color: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); animation: pulse-glow 2s infinite; }
        .stepper-item.is-active .stepper-label { color: var(--md-sys-color-primary); font-weight: 700; }
        .stepper-item.is-completed .stepper-icon { background-color: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); }
        .stepper-item.is-completed .step-number { opacity: 0; }
        .stepper-item.is-completed .step-checkmark { opacity: 1; }
        .stepper-item.is-completed:not(:last-child)::after { background-color: var(--md-sys-color-primary); }
        
        .step-content { display: none; animation: fadeIn 0.5s ease-in-out; }
        .step-content.is-active { display: block; }
        .stepper-nav { display: flex; justify-content: space-between; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--md-sys-color-outline); }
        .stepper-btn { padding: 0.75rem 1.5rem; border-radius: 9999px; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; }
        .stepper-btn.primary { background: linear-gradient(to right, var(--md-sys-color-primary), var(--md-sys-color-primary-light), var(--md-sys-color-primary)); background-size: 200% 100%; color: var(--md-sys-color-on-primary); animation: gradient-shift 4s ease infinite; }
        .stepper-btn.secondary { background-color: #E6EEF5; color: #475569; }
        .stepper-btn:disabled { background-color: #E6EEF5; background-image: none; color: #94A3B8; cursor: not-allowed; }
        .action-tag { background-color: var(--md-sys-color-secondary-container); color: var(--md-sys-color-on-secondary-container); padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 600; display: inline-block; margin: 0.25rem 0; }
        .text-gradient-primary { background: linear-gradient(to right, var(--md-sys-color-primary), var(--md-sys-color-primary-light)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .highlight-card { background-color: var(--md-sys-color-primary-container); box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 1px solid var(--md-sys-color-outline); transition: all 0.2s ease; }
        .highlight-card:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.08); }
        .summary-card { padding: 1.5rem; border-radius: 1rem; background-color: var(--md-sys-color-surface); border: 1px solid var(--md-sys-color-outline); transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; cursor: pointer; }
        .summary-card:hover { transform: translateY(-4px); box-shadow: 0 8px 16px rgba(0,0,0,0.08); }
        .summary-card .instruction-icon-container { background-color: var(--md-sys-color-primary-container); color: var(--md-sys-color-primary); }
        
        /* New Flight Ticket Styles */
        .flight-ticket-card { 
            font-family: 'Source Code Pro', monospace; 
            display: flex;
            overflow: visible;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(239, 246, 255, 0.7));
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            cursor: pointer;
        }
        .flight-ticket-card::before { /* Glow effect */
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 20px;
            box-shadow: 0 0 0px rgba(59, 130, 246, 0.5);
            opacity: 0;
            transition: all 0.4s ease;
            z-index: -1;
        }
        .flight-ticket-card:hover::before {
             box-shadow: 0 0 40px rgba(59, 130, 246, 0.5);
             opacity: 1;
        }
        .flight-ticket-card:active {
            transform: scale(0.98) !important;
            transition-duration: 0.1s;
        }
        .ticket-main { padding: 1.5rem; flex-grow: 1; }
        .ticket-stub { flex-basis: 90px; flex-shrink: 0; background-color: rgba(239, 246, 255, 0.8); border-left: 2px dashed rgba(221, 232, 244, 0.7); display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 1.25rem 0.5rem; position: relative; border-radius: 0 20px 20px 0; }
        .ticket-stub::before, .ticket-stub::after { content: ''; position: absolute; left: -12px; width: 24px; height: 24px; background-color: var(--main-container-bg); border-radius: 50%; z-index: 10; }
        .ticket-stub::before { top: -12px; }
        .ticket-stub::after { bottom: -12px; }
        .ticket-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--md-sys-color-outline); padding-bottom: 0.75rem; margin-bottom: 1.5rem; }
        .ticket-airline { font-weight: 700; color: var(--md-sys-color-primary); display: flex; align-items: center; gap: 0.5rem; }
        .ticket-class { background-color: var(--md-sys-color-secondary-container); color: var(--md-sys-color-on-secondary-container); padding: 0.125rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .ticket-route { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .ticket-location { text-align: center; }
        .ticket-location .label { font-size: 0.75rem; color: #64748b; letter-spacing: 1px; }
        .ticket-location .code { font-size: 2.5rem; font-weight: 700; color: #1e293b; line-height: 1; }
        .ticket-flight-path { flex-grow: 1; height: 24px; position: relative; margin: 0 0.5rem; display: flex; align-items: center; justify-content: center; }
        .ticket-flight-path::after { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 2px; background-image: linear-gradient(to right, #9ca3af 50%, transparent 50%); background-size: 8px 2px; background-repeat: repeat-x; }
        .ticket-flight-icon-animated { position: absolute; top: 50%; color: var(--md-sys-color-primary); z-index: 2; }
        .flight-stops-info { position: relative; z-index: 1; background-color: rgba(255,255,255,0.7); padding: 0 0.5rem; }
        .stops-text { font-family: 'Poppins', sans-serif; font-size: 0.7rem; font-weight: 600; color: #64748b; letter-spacing: 0.5px; }
        @keyframes flight-loop-return {
            0% { left: 0; transform: translateY(-50%) rotate(90deg); }
            45% { left: calc(100% - 24px); transform: translateY(-50%) rotate(90deg); }
            50% { left: calc(100% - 24px); transform: translateY(-50%) rotate(-90deg); }
            95% { left: 0; transform: translateY(-50%) rotate(-90deg); }
            100% { left: 0; transform: translateY(-50%) rotate(90deg); }
        }
        .ticket-flight-icon-animated-1 { animation: flight-loop-return 6s linear infinite; }
        .ticket-flight-icon-animated-2 { animation: flight-loop-return 8s linear infinite; }
        .ticket-footer { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 1.5rem; border-top: 1px solid var(--md-sys-color-outline); padding-top: 1rem; }
        .ticket-details { font-size: 0.75rem; color: #64748b; font-family: 'Poppins', sans-serif; }
        .ticket-date-group { display: flex; gap: 1rem; font-family: 'Poppins', sans-serif; text-align: center; }
        .ticket-date-info .label { font-size: 0.75rem; color: #64748b; }
        .ticket-date-info .date-value { font-weight: 600; color: #1e293b; }
        .ticket-price { font-size: 1.75rem; font-weight: 700; color: var(--md-sys-color-primary); line-height: 1; }
        .ticket-price .currency { font-size: 1rem; vertical-align: baseline; }
        .ticket-stub .code { writing-mode: vertical-rl; text-orientation: mixed; font-weight: 700; font-size: 1.25rem; letter-spacing: 2px; color: var(--md-sys-color-primary); }
        .flight-ticket-card.placeholder { filter: blur(4px); opacity: 0.6; }
        .ticket-barcode { width: 100%; height: 60px; background-image: linear-gradient(to right, #1e293b 1px, transparent 1px, transparent 3px, #1e293b 3px, #1e293b 4px, transparent 4px, transparent 6px, #1e293b 6px, #1e293b 8px, transparent 8px, transparent 9px); background-size: 12px 100%; }
        
        /* Itinerary-specific styles */
        #itinerary-stepper .stepper-label-container { display: flex; flex-direction: row; align-items: center; gap: 1.5rem; width: 100%; padding-top: 0; }
        #itinerary-stepper .stepper-label { font-size: 1rem; flex-shrink: 0; }
        #itinerary-stepper .instruction-card { transition: all 0.3s ease-in-out; flex-grow: 1; margin-top: 0 !important; }
        #itinerary-stepper .stepper-item:not(.is-active) .instruction-card { opacity: 0.6; background-color: rgba(248, 251, 254, 0.4); }
        #itinerary-stepper .stepper-item.is-active .instruction-card { transform: scale(1.01); box-shadow: 0 8px 16px rgba(0,0,0,0.07); border-color: var(--md-sys-color-primary-light); opacity: 1; }
        
        /* Itinerary Collapse/Expand styles */
        #itinerary-stepper { transition: max-height 0.6s ease-in-out; overflow: hidden; position: relative; }
        #itinerary-stepper.is-collapsed { max-height: 18rem; /* Approx height for 2 items + padding */ }
        #itinerary-stepper.is-collapsed::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 8rem; background: linear-gradient(to top, rgba(248, 251, 254, 1), rgba(248, 251, 254, 0)); pointer-events: none; border-radius: 0 0 16px 16px; }

        @media (max-width: 768px) {
            body { padding-top: 1rem; padding-bottom: 1rem; }
            .main-container { padding: 0; margin: 0; border-radius: 0; box-shadow: none; border: none; background-color: transparent; }
            .section-card { border-radius: 0; padding-left: 1.5rem; padding-right: 1.5rem; }
            #itinerary-stepper .stepper-label-container { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
            #itinerary-stepper .instruction-card { width: 100%; }
            #itinerary-stepper.is-collapsed { max-height: 28rem; /* Approx height for 2 stacked items */ }
            .ticket-main { padding: 1rem; }
            .ticket-route { flex-direction: column; gap: 1rem; }
            .stepper-item { flex-direction: column; align-items: flex-start; }
            #stepper-ui-container.grid { display: block; }
        }
    </style>
</head>
<body class="flex flex-col items-center py-8 px-4">
    <div class="main-container w-full max-w-7xl mx-auto p-6 sm:p-8">
        <!-- Itinerary Section -->
        <div class="text-center">
            <p class="text-sm font-semibold text-blue-600 uppercase tracking-widest">SHANGHAI | SUZHOU | NANJING</p>
            <h1 class="text-2xl sm:text-3xl font-semibold text-gray-700 mt-2">Tour Itinerary</h1>
        </div>
        <section id="itinerary-section" class="m3-elevated-card section-card p-6 mt-6">
            <div id="itinerary-stepper" class="stepper px-2 sm:px-4">
                <!-- Itinerary stepper items will be generated by JS -->
            </div>
            <div class="pt-4 mt-2 text-center">
                 <button id="toggle-itinerary-btn" class="stepper-btn secondary">See More</button>
            </div>
            <p class="text-xs text-gray-500 italic text-center mt-4">Please note: This is a provisional itinerary. A final schedule will be confirmed before departure.</p>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="mt-8 sm:mt-16">
            <div class="text-center">
                <p class="text-sm font-semibold text-blue-600 uppercase tracking-widest">Flight Information</p>
                <h1 class="text-2xl sm:text-3xl font-semibold text-gray-700 mt-2">Your Flight Details</h1>
            </div>
            <div class="m3-elevated-card section-card p-6 mt-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div id="flight-card-fll" class="flight-ticket-card placeholder">
                        <div class="ticket-main">
                            <div class="ticket-header">
                                <div class="ticket-airline">
                                    <span class="material-symbols-outlined">flight_takeoff</span>
                                    <span class="airline-name">NORLAND AIR</span>
                                </div>
                                <div class="ticket-class">ECONOMY</div>
                            </div>
                            <div class="ticket-route">
                                <div class="ticket-location">
                                    <p class="label">FROM</p>
                                    <p class="code departure-code">FLL</p>
                                </div>
                                <div class="ticket-flight-path">
                                    <div class="flight-stops-info">
                                        <p class="stops-text"></p>
                                    </div>
                                    <span class="material-symbols-outlined ticket-flight-icon-animated ticket-flight-icon-animated-1">flight</span>
                                </div>
                                <div class="ticket-location">
                                    <p class="label">TO</p>
                                    <p class="code arrival-code">PVG</p>
                                </div>
                            </div>
                            <div class="ticket-footer">
                                <div class="ticket-details">
                                    <p class="flight-connections">Fetching route...</p>
                                    <p class="flight-last-updated">Updating...</p>
                                </div>
                                <div class="ticket-date-group">
                                    <div class="ticket-date-info">
                                        <p class="label">DEPART</p>
                                        <p class="date-value departure-date">-- ---</p>
                                    </div>
                                    <div class="ticket-date-info">
                                        <p class="label">RETURN</p>
                                        <p class="date-value return-date">-- ---</p>
                                    </div>
                                </div>
                                <div class="ticket-price">
                                    <span class="currency">$</span>----
                                </div>
                            </div>
                        </div>
                        <div class="ticket-stub">
                            <p class="code route-stub-code">FLL-PVG</p>
                            <div class="ticket-barcode"></div>
                        </div>
                    </div>
                     <div id="flight-card-mia" class="flight-ticket-card placeholder">
                        <div class="ticket-main">
                            <div class="ticket-header">
                                <div class="ticket-airline">
                                    <span class="material-symbols-outlined">flight_takeoff</span>
                                    <span class="airline-name">NORLAND AIR</span>
                                </div>
                                <div class="ticket-class">ECONOMY</div>
                            </div>
                            <div class="ticket-route">
                                <div class="ticket-location">
                                    <p class="label">FROM</p>
                                    <p class="code departure-code">MIA</p>
                                </div>
                                <div class="ticket-flight-path">
                                     <div class="flight-stops-info">
                                        <p class="stops-text"></p>
                                    </div>
                                    <span class="material-symbols-outlined ticket-flight-icon-animated ticket-flight-icon-animated-2">flight</span>
                                </div>
                                <div class="ticket-location">
                                    <p class="label">TO</p>
                                    <p class="code arrival-code">PVG</p>
                                </div>
                            </div>
                            <div class="ticket-footer">
                                <div class="ticket-details">
                                    <p class="flight-connections">Fetching route...</p>
                                    <p class="flight-last-updated">Updating...</p>
                                </div>
                                 <div class="ticket-date-group">
                                    <div class="ticket-date-info">
                                        <p class="label">DEPART</p>
                                        <p class="date-value departure-date">-- ---</p>
                                    </div>
                                    <div class="ticket-date-info">
                                        <p class="label">RETURN</p>
                                        <p class="date-value return-date">-- ---</p>
                                    </div>
                                </div>
                                <div class="ticket-price">
                                    <span class="currency">$</span>----
                                </div>
                            </div>
                        </div>
                        <div class="ticket-stub">
                            <p class="code route-stub-code">MIA-PVG</p>
                            <div class="ticket-barcode"></div>
                        </div>
                    </div>
                </div>
                 <p class="text-xs text-gray-500 italic text-center mt-4">Please note: Prices shown are for reference, and group rates may vary slightly.</p>
            </div>
        </section>
        
        <div class="text-center mt-8 sm:mt-16">
            <p class="text-sm font-semibold text-blue-600 uppercase tracking-widest">Preparation Guide</p>
            <h1 class="text-2xl sm:text-3xl font-semibold text-gray-700 mt-2">Visa Application</h1>
        </div>

        <div class="m3-elevated-card section-card p-6 mt-6">
            <!-- Navigation Tabs -->
            <nav class="tabs-container">
                <div class="tab-list" role="tablist">
                    <button class="tab-btn is-active" data-tab="process-tab" role="tab" aria-selected="true" tabindex="0">Application Process</button>
                    <button class="tab-btn" data-tab="documents-tab" role="tab" aria-selected="false" tabindex="0">Downloadable Forms</button>
                </div>
            </nav>
            
            <!-- Tab Content -->
            <div class="mt-6">
                <!-- Process Stepper Tab -->
                <div id="process-tab" class="tab-content" style="display:block;">
                     <div class="instruction-card bg-blue-50 border-blue-200 mb-8">
                        <div class="instruction-icon-container !bg-blue-100 !text-blue-600">
                            <span class="material-symbols-outlined text-xl">lightbulb</span>
                        </div>
                        <div class="instruction-content">
                            <h4 class="font-semibold text-blue-800 text-sm">Getting Started</h4>
                            <p class="text-xs text-blue-700 mt-1">This guide will walk you through the visa process step-by-step. It may look like a lot, but it's just a few key stages: getting an invitation, gathering your documents, and submitting the application. We're here to help at every stage!</p>
                        </div>
                    </div>
                    <div id="stepper-ui-container" class="grid grid-cols-1 md:grid-cols-[auto,1fr] gap-x-8 gap-y-6">
                        <div class="stepper stepper-container px-2 sm:px-4">
                            <div class="stepper-item is-active" data-step="1" tabindex="0">
                                <div class="stepper-icon"><span class="step-number">1</span><span class="material-symbols-outlined step-checkmark">check</span></div>
                                <div class="stepper-label-container"><div class="stepper-label">Invitation</div></div>
                            </div>
                            <div class="stepper-item" data-step="2" tabindex="0">
                                <div class="stepper-icon"><span class="step-number">2</span><span class="material-symbols-outlined step-checkmark">check</span></div>
                                <div class="stepper-label-container"><div class="stepper-label">Documents</div></div>
                            </div>
                            <div class="stepper-item" data-step="3" tabindex="0">
                                <div class="stepper-icon"><span class="step-number">3</span><span class="material-symbols-outlined step-checkmark">check</span></div>
                                <div class="stepper-label-container"><div class="stepper-label">Application</div></div>
                            </div>
                            <div class="stepper-item" data-step="4" tabindex="0">
                                <div class="stepper-icon"><span class="step-number">4</span><span class="material-symbols-outlined step-checkmark">check</span></div>
                                <div class="stepper-label-container"><div class="stepper-label">Submission</div></div>
                            </div>
                            <div class="stepper-item" data-step="5" tabindex="0">
                                <div class="stepper-icon"><span class="step-number">5</span><span class="material-symbols-outlined step-checkmark">check</span></div>
                                <div class="stepper-label-container"><div class="stepper-label">Summary</div></div>
                            </div>
                        </div>

                        <div class="step-content-container">
                            <!-- Step Content will be dynamically shown here -->
                        </div>
                        
                        <div class="stepper-nav md:col-start-2">
                            <button id="prev-step-btn" class="stepper-btn secondary">Previous</button>
                            <button id="next-step-btn" class="stepper-btn primary">Next Step</button>
                        </div>
                    </div>
                </div>

                <!-- Documents Tab -->
                <div id="documents-tab" class="tab-content" style="display:none;">
                    <div class="space-y-2">
                        <a href="https://qioffe.github.io/25_NORLAND_TRIP/Consent_Letter.pdf?v=random" target="_blank" rel="noopener noreferrer" class="document-list-item"><div class="document-list-icon"><span class="material-symbols-outlined text-4xl">description</span></div><div class="document-list-text"><h3 class="font-semibold text-gray-800">Consent Letter</h3><p class="text-sm text-gray-600">A notarized form for minors.</p></div><div class="document-list-action"><span class="material-symbols-outlined">download</span></div></a>
                        <a href="https://qioffe.github.io/25_NORLAND_TRIP/JESIE_application.pdf?v=random" target="_blank" rel="noopener noreferrer" class="document-list-item"><div class="document-list-icon"><span class="material-symbols-outlined text-4xl">description</span></div><div class="document-list-text"><h3 class="font-semibold text-gray-800">JESIE Application</h3><p class="text-sm text-gray-600">The main program application form.</p></div><div class="document-list-action"><span class="material-symbols-outlined">download</span></div></a>
                        <a href="https://qioffe.github.io/25_NORLAND_TRIP/cova_2013.pdf?v=random" target="_blank" rel="noopener noreferrer" class="document-list-item"><div class="document-list-icon"><span class="material-symbols-outlined text-4xl">description</span></div><div class="document-list-text"><h3 class="font-semibold text-gray-800">Visa Application Templates (COVA)</h3><p class="text-sm text-gray-600">A guide for the official COVA form.</p></div><div class="document-list-action"><span class="material-symbols-outlined">download</span></div></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**
         * @file Modern, event-driven UI script for a travel dashboard.
         * @author Q
         * @version 18.0
         */
        document.addEventListener('DOMContentLoaded', () => {
            const mainContainer = document.querySelector('.main-container');
            mainContainer.classList.add('is-visible');
            const randomVersion = Math.random().toString(36).substring(2, 8);
            
            const applicationStepContents = {
                1: `<div class="p-6"><h2 class="text-2xl font-semibold text-gray-800 mb-6">Obtain Your Official Invitation Letter</h2><p class="text-gray-600 mb-8">First, <span class="action-tag">complete the JESIS form</span> required by your program and submit a photocopy of the minor's passport bio-data page to receive your official invitation letter.</p><div class="space-y-4"><a href="https://qioffe.github.io/25_NORLAND_TRIP/JESIE_application.pdf?v=${randomVersion}" target="_blank" rel="noopener noreferrer" class="instruction-link"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">description</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Fill and E-sign the Application</h4><p class="text-xs text-gray-600 mt-1">This is the primary program application form. Please fill it out completely and e-sign it digitally.</p></div><span class="material-symbols-outlined text-base text-gray-400">open_in_new</span></a><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">file_copy</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Photocopy of Passport Bio-Data Page</h4><p class="text-xs text-gray-600 mt-1">A clear photocopy of the minor's passport page to be uploaded.</p></div></div></div></div>`,
                2: `<div class="p-6"><h2 class="text-2xl font-semibold text-gray-800 mb-6">Gather Required Documents</h2><p class="text-gray-600 mb-8">Once you have your invitation letter, you must <span class="action-tag">prepare a folder</span> containing all the required documents in physical, printed form.</p><div class="space-y-6"><div><h3 class="text-lg font-semibold text-gray-700 mb-4">Personal & Guardian Documents</h3><div class="grid grid-cols-1 xl:grid-cols-2 gap-4"><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">contact_page</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Original Passport</h4><p class="text-xs text-gray-600 mt-1">This original document must have at least six months of validity remaining and two blank pages.</p></div></div><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">badge</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">A printed photocopy of Passport Bio-Data Page</h4><p class="text-xs text-gray-600 mt-1">A clear printed photocopy of the page in the minor's passport from STEP1.</p></div></div><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">account_box</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Guardian's ID and Proof of Address</h4><p class="text-xs text-gray-600 mt-1">Provide both a clear photocopy of a valid ID and a document for proof of current address.</p></div></div><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">family_restroom</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Original Proof of Relationship</h4><p class="text-xs text-gray-600 mt-1">You must provide the original birth certificate for parents or a mandatory original court order for legal guardians.</p></div></div></div></div><div><h3 class="text-lg font-semibold text-gray-700 mb-4">Program & Visa Forms</h3><div class="grid grid-cols-1 xl:grid-cols-2 gap-4"><a href="https://qioffe.github.io/25_NORLAND_TRIP/Consent_Letter.pdf?v=${randomVersion}" target="_blank" rel="noopener noreferrer" class="instruction-link"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">gavel</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Notarized Consent for Visa Application</h4><p class="text-xs text-gray-600 mt-1">This form must be signed by the guardian and officially notarized.</p></div><span class="material-symbols-outlined text-base text-gray-400">open_in_new</span></a><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">mail</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Official Invitation Letter</h4><p class="text-xs text-gray-600 mt-1">The letter you received in STEP1.</p></div></div></div></div></div></div>`,
                3: `<div class="p-6"><h2 class="text-2xl font-semibold text-gray-800 mb-6">Complete the Online Application</h2><p class="text-gray-600 mb-8">Now, a parent or guardian must fill out the online form. You can use the <span class="action-tag">visa application templates we provide</span>.</p><div class="space-y-4"><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">photo_camera</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Prepare a Visa-Ready Photo</h4><p class="text-xs text-gray-600 mt-1">Make sure you have a visa-ready photo to upload.</p></div></div><a href="https://cova.mfa.gov.cn/qzCoCommonController.do?show&pageId=index&locale=en_US" target="_blank" rel="noopener noreferrer" class="instruction-link"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">language</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Go to the Official Visa Website</h4><p class="text-xs text-gray-600 mt-1">Select location: North America -> Washington, D.C.</p></div><span class="material-symbols-outlined text-base text-gray-400">open_in_new</span></a><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">edit_document</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Fill Out the Form</h4><p class="text-xs text-gray-600 mt-1">Complete all sections accurately.</p></div></div><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">print</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Save & Print</h4><p class="text-xs text-gray-600 mt-1">Save your application number and print all pages of the form.</p></div></div><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">draw</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Sign the Printed Form</h4><p class="text-xs text-gray-600 mt-1">A guardian must sign the confirmation page and Section 9.1.</p></div></div></div><p class="text-sm text-red-600 mt-6"><strong>Important</strong>: The minor should not sign any part of the application.</p></div>`,
                4: `<div class="p-6"><h2 class="text-2xl font-semibold text-gray-800 mb-6">Application Submission</h2><p class="text-gray-600 mb-8">Finally, <span class="action-tag">submit your folder to your coordinator</span> containing all the required <span class="action-tag">printed</span> and <span class="action-tag">original</span> documents.</p><div class="space-y-4"><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">checklist</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Final Check</h4><p class="text-xs text-gray-600 mt-1">We will review your folder to ensure all documents are correct and ready for submission.</p></div></div><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">send</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Submission</h4><p class="text-xs text-gray-600 mt-1">We will submit the complete application to the visa office for you.</p></div></div><div class="instruction-card"><div class="instruction-icon-container"><span class="material-symbols-outlined text-xl">notifications</span></div><div class="instruction-content"><h4 class="font-semibold text-gray-800 text-sm">Notification</h4><p class="text-xs text-gray-600 mt-1">The passport with the visa should be ready in 3 to 4 business days. We will notify you when it's ready for pickup.</p></div></div></div></div>`,
                5: `<div class="p-6"><h2 class="text-2xl font-semibold text-gray-800 mb-6">Application Process Summary</h2><p class="text-gray-600 mb-8">Here is a quick overview of the four main steps you've completed for your visa application.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="summary-card p-4 space-y-2"><div class="instruction-icon-container"><span class="material-symbols-outlined">mail</span></div><h3 class="font-bold text-lg text-gray-800">1. Invitation</h3><p class="text-sm text-gray-600 mt-2">Complete JESIS form and upload passport photocopy.</p></div><div class="summary-card p-4 space-y-2"><div class="instruction-icon-container"><span class="material-symbols-outlined">folder_open</span></div><h3 class="font-bold text-lg text-gray-800">2. Documents</h3><p class="text-sm text-gray-600 mt-2">Gather all required physical documents into a folder.</p></div><div class="summary-card p-4 space-y-2"><div class="instruction-icon-container"><span class="material-symbols-outlined">web</span></div><h3 class="font-bold text-lg text-gray-800">3. Online Application</h3><p class="text-sm text-gray-600 mt-2">Fill out, save, and print the official online visa form.</p></div><div class="summary-card p-4 space-y-2"><div class="instruction-icon-container"><span class="material-symbols-outlined">send</span></div><h3 class="font-bold text-lg text-gray-800">4. Final Submission</h3><p class="text-sm text-gray-600 mt-2">Submit your document folder to your coordinator.</p></div></div></div>`
            };

            loadFlightData(randomVersion);
            setupTabs();
            setupStepper('stepper-ui-container', applicationStepContents, true);
            setupItinerary();
            setupInteractiveCards();
        });

        async function loadFlightData(randomVersion) {
            try {
                const response = await fetch(`https://qioffe.github.io/25_NORLAND_TRIP/flights_data.json?v=${randomVersion}`);
                if (!response.ok) throw new Error(`HTTP Error: ${response.status}`);
                const data = await response.json();
                updateFlightCard('flight-card-fll', data['FLL-PVG']);
                updateFlightCard('flight-card-mia', data['MIA-PVG']);
            } catch (error) {
                console.error("Failed to load flight data:", error);
                ['flight-card-fll', 'flight-card-mia'].forEach(id => updateFlightCard(id, { status: 'data_load_failed' }));
            }
        }

        function updateFlightCard(cardId, data) {
            const card = document.getElementById(cardId);
            if (!card) return;
            const el = (selector) => card.querySelector(selector);
            const isSuccess = data?.status === 'ok' && data.price;
            card.classList.toggle('placeholder', !isSuccess);
            
            const airlineEl = el('.airline-name');
            if (airlineEl) {
                airlineEl.textContent = isSuccess && data.airline ? data.airline.toUpperCase() : 'NORLAND AIR';
            }
            
            const stopsTextEl = el('.stops-text');
            const connectionsEl = el('.flight-connections');
            if (isSuccess && data.route_info) {
                const airports = data.route_info.split('→');
                const numStops = airports.length - 2;

                if (stopsTextEl) {
                    if (numStops > 0) {
                        stopsTextEl.textContent = `${numStops} STOP${numStops > 1 ? 'S' : ''}`;
                    } else {
                        stopsTextEl.textContent = 'NON-STOP';
                    }
                }
                
                if (connectionsEl) {
                    if (numStops > 0) {
                        const connections = airports.slice(1, -1).join(', ');
                        connectionsEl.textContent = `via ${connections}`;
                    } else {
                         connectionsEl.textContent = 'Direct Flight';
                    }
                }
            } else {
                if(stopsTextEl) stopsTextEl.textContent = '';
                if(connectionsEl) connectionsEl.textContent = (data?.status || 'error').replace(/_/g, ' ');
            }


            const lastUpdatedEl = el('.flight-last-updated');
            if (lastUpdatedEl) {
                lastUpdatedEl.textContent = isSuccess && data.last_updated ? `Updated: ${new Date(data.last_updated).toLocaleDateString('en-US', { day: 'numeric', month: 'short' })}` : '';
            }

            const departureCode = cardId.includes('fll') ? 'FLL' : 'MIA';
            const arrivalCode = 'PVG';

            const depCodeEl = el('.departure-code');
            if (depCodeEl) depCodeEl.textContent = departureCode;

            const arrCodeEl = el('.arrival-code');
            if (arrCodeEl) arrCodeEl.textContent = arrivalCode;

            const stubCodeEl = el('.route-stub-code');
            if (stubCodeEl) stubCodeEl.textContent = `${departureCode}-${arrivalCode}`;
            
            const departureDateEl = el('.departure-date');
            if (departureDateEl) {
                if (isSuccess && data.outbound_date) {
                    const tripDate = new Date(data.outbound_date + 'T00:00:00');
                    const formattedDate = tripDate.toLocaleDateString('en-US', {
                        day: '2-digit',
                        month: 'short'
                    }).toUpperCase();
                    departureDateEl.textContent = formattedDate;
                } else {
                    departureDateEl.textContent = '-- ---';
                }
            }

            const returnDateEl = el('.return-date');
             if (returnDateEl) {
                if (isSuccess && data.return_date) {
                    const returnDate = new Date(data.return_date + 'T00:00:00');
                    const formattedReturnDate = returnDate.toLocaleDateString('en-US', {
                        day: '2-digit',
                        month: 'short'
                    }).toUpperCase();
                    returnDateEl.textContent = formattedReturnDate;
                } else {
                    returnDateEl.textContent = '-- ---';
                }
            }
            
            const priceEl = el('.ticket-price');
            if (priceEl) {
                if (isSuccess && data.price) {
                    priceEl.innerHTML = `<span class="currency">$</span>${data.price}`;
                } else {
                    priceEl.innerHTML = `<span class="currency">$</span>----`;
                }
            }
        }

        function setupTabs() {
            document.querySelector('.tabs-container')?.addEventListener('click', e => {
                const button = e.target.closest('.tab-btn[data-tab]');
                if (!button) return;
                document.querySelectorAll('.tabs-container .tab-btn').forEach(btn => {
                    btn.classList.remove('is-active');
                    btn.setAttribute('aria-selected', 'false');
                });
                document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
                button.classList.add('is-active');
                button.setAttribute('aria-selected', 'true');
                document.getElementById(button.dataset.tab).style.display = 'block';
            });
        }

        function setupStepper(containerId, contents, hasNavButtons) {
            const container = document.getElementById(containerId);
            if (!container) return;
            const root = container.querySelector('.stepper');
            const items = root.querySelectorAll('.stepper-item');
            const contentContainer = container.querySelector('.step-content-container');
            const nextBtn = container.querySelector('.stepper-btn.primary');
            const prevBtn = container.querySelector('.stepper-btn.secondary');
            let step = 1;

            const update = () => {
                items.forEach((item, i) => {
                    const stepNumber = i + 1;
                    item.classList.toggle('is-completed', stepNumber < step);
                    item.classList.toggle('is-active', stepNumber === step);
                });
                if (contentContainer) {
                    contentContainer.innerHTML = `<div class="step-content is-active" data-step-content="${step}">${contents[step]}</div>`;
                }
                if (hasNavButtons) {
                    prevBtn.disabled = step === 1;
                    nextBtn.classList.toggle('hidden', step === items.length);
                    nextBtn.textContent = step === items.length - 1 ? 'View Summary' : 'Next Step';
                }
            };
            
            const nav = (newStep) => { 
                step = Math.max(1, Math.min(newStep, items.length)); 
                update(); 
            };

            if (hasNavButtons) {
                nextBtn.addEventListener('click', () => nav(step + 1));
                prevBtn.addEventListener('click', () => nav(step - 1));
            }

            root.addEventListener('click', e => {
                const item = e.target.closest('.stepper-item[data-step]');
                if (item) nav(+item.dataset.step);
            });
            
            update();
        }

        function setupItinerary() {
            const stepperContainer = document.getElementById('itinerary-stepper');
            if(!stepperContainer) return;
            
            const itineraryContents = {
                1: { title: "Shanghai Arrival & Welcome", morning: { icon: "flight_land", text: "Arrive at PVG, Shanghai" }, afternoon: { icon: "directions_bus", text: "Transfer to Suzhou" } },
                2: { title: "Cultural Connect", morning: { icon: "school", text: "Visit Suzhou North American High School" }, afternoon: { icon: "science", text: "Explore the DNA Learning Center" } },
                3: { title: "Suzhou Sights & Sounds", morning: { icon: "park", text: "Tour the Humble Administrator’s Garden" }, afternoon: { icon: "theater_comedy", text: "Visit the Kunshan Opera Museum" } },
                4: { title: "Creative Exchange", morning: { icon: "palette", text: "Engage in activities at Suzhou Tourism Institute" }, afternoon: { icon: "music_note", text: "Experience Kunqu opera at Suzhou Art Institute" } },
                5: { title: "Next Stop: Nanjing", morning: { icon: "train", text: "Travel to Nanjing" }, afternoon: { icon: "stadium", text: "Welcome ceremony at Nanjing Sport Institute" } },
                6: { title: "Cultural Performance Exchange", morning: { icon: "sports_tennis", text: "Interact with champions at the Sport Institute" }, afternoon: { icon: "group_work", text: "Share your talents at the exchange" } },
                7: { title: "The Grand Finale", morning: { icon: "museum", text: "Visit Nanjing University of the Arts Museum" }, afternoon: { icon: "campaign", text: "Represent at the Performance Gala" } },
                8: { title: "Nanjing's Legacy", morning: { icon: "landscape", text: "Dr. Sun Yat-sen’s Mausoleum Scenic Area" }, afternoon: { icon: "sailing", text: "Explore Xuanwu Lake & Confucius Temple" } },
                9: { title: "Pandas & Heritage", morning: { icon: "pets", text: "See pandas at Nanjing Hongshan Zoo" }, afternoon: { icon: "account_balance", text: "Explore the Nanjing Museum" } },
                10: { title: "Homeward Bound", morning: { icon: "flight_takeoff", text: "Depart from PVG, Shanghai" }, afternoon: { icon: "airplanemode_active", text: "Have a safe flight home!" } },
            };

            let stepperHTML = '';
            for (let i = 1; i <= 10; i++) {
                const day = itineraryContents[i];
                stepperHTML += `
                     <div class="stepper-item" data-step="${i}" tabindex="0">
                        <div class="stepper-icon"><span class="step-number">${i}</span><span class="material-symbols-outlined step-checkmark">check</span></div>
                        <div class="stepper-label-container">
                            <div class="stepper-label">${day.title}</div>
                            <div class="instruction-card interactive-card">
                                <div class="instruction-content w-full">
                                    <div class="flex items-center gap-3 text-sm">
                                        <span class="material-symbols-outlined text-lg text-blue-500">${day.morning.icon}</span>
                                        <p class="text-gray-700">${day.morning.text}</p>
                                    </div>
                                    <hr class="my-2 border-gray-200">
                                    <div class="flex items-center gap-3 text-sm">
                                        <span class="material-symbols-outlined text-lg text-blue-500">${day.afternoon.icon}</span>
                                        <p class="text-gray-700">${day.afternoon.text}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>`;
            }
            stepperContainer.innerHTML = stepperHTML;
            
            stepperContainer.classList.add('is-collapsed');

            stepperContainer.addEventListener('click', e => {
                const item = e.target.closest('.stepper-item[data-step]');
                if (item) {
                    const currentlyActive = stepperContainer.querySelector('.stepper-item.is-active');
                    if (currentlyActive) {
                        currentlyActive.classList.remove('is-active');
                    }
                    item.classList.add('is-active');
                }
            });

            // Set day 1 as active by default
            const firstStep = stepperContainer.querySelector('.stepper-item[data-step="1"]');
            if (firstStep) {
                firstStep.classList.add('is-active');
            }

            // Setup See More/Less button
            const toggleBtn = document.getElementById('toggle-itinerary-btn');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    const isCollapsed = stepperContainer.classList.contains('is-collapsed');
                    if (isCollapsed) {
                        stepperContainer.classList.remove('is-collapsed');
                        // Set max-height to full scroll height to animate open
                        stepperContainer.style.maxHeight = stepperContainer.scrollHeight + 'px';
                        toggleBtn.textContent = 'See Less';
                    } else {
                        // Unset max-height so CSS class can take over for collapse animation
                        stepperContainer.style.maxHeight = null;
                        stepperContainer.classList.add('is-collapsed');
                        toggleBtn.textContent = 'See More';
                    }
                });

                // Adjust max-height on resize for the expanded state to remain correct
                new ResizeObserver(() => {
                    if (!stepperContainer.classList.contains('is-collapsed')) {
                        stepperContainer.style.maxHeight = stepperContainer.scrollHeight + 'px';
                    }
                }).observe(stepperContainer);
            }
        }
        
        function setupInteractiveCards() {
            const cards = document.querySelectorAll('.flight-ticket-card');
            const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);

            if (isTouchDevice && window.DeviceOrientationEvent) {
                // Use Gyroscope for mobile
                window.addEventListener('deviceorientation', (event) => {
                    // Normalize beta and gamma values
                    const beta = Math.min(Math.max(event.beta, -30), 30);
                    const gamma = Math.min(Math.max(event.gamma, -30), 30);
                    
                    const rotateX = beta / 3; // reduce sensitivity
                    const rotateY = gamma / 3; // reduce sensitivity

                    cards.forEach(card => {
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                    });
                });
            } else {
                // Use Mousemove for desktop
                cards.forEach(card => {
                    card.addEventListener('mousemove', (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = e.clientX - rect.left - rect.width / 2;
                        const y = e.clientY - rect.top - rect.height / 2;
                        const rotateX = -y / 20;
                        const rotateY = x / 20;
                        card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                    });
                    card.addEventListener('mouseleave', () => {
                        card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
                    });
                });
            }
        }
        setupInteractiveCards();

    </script>
</body>
</html>
